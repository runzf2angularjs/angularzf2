<?php
$this->assets('autocomplete');
$active = (!$this->search) ? ' style="display:none;" ' : '';
?>
<h1><?=__('Group List') ?></h1>

<div class="panel panel-default">
    <div class="panel-heading" style="cursor: pointer;" onclick="$('#panel-body-search-role').toggle();">
        <h3 class="panel-title"><?=__('Search') ?></h3>
    </div>
    <div id="panel-body-search-role" class="panel-body" <?=$active?>>
        <?= $this->smartForm($form) ?>
    </div>
</div>

<div class="table-responsive">
    <table class="table table-striped table-hover table-condensed">
        <thead>
            <tr>
                <th width="45%"><?=__('Full name') ?></th>
                <th><?=__('Short name') ?></th>
                <th style="width: 100px;"><?=__('Actions') ?></th>
            </tr>
        </thead>
        <tbody>
            <?php foreach ($this->paginator as $group) : ?>
            <tr>
                <td>
                    <?php if ($this->access['view']) : ?>
                    <a href="<?=$this->smartUrlFromRoute('groups.view', array('id' => $group->id_acl_role))?>"><?= e($group->fullname) ?></a>
                    <?php else : ?>
                    <?= e($group->fullname) ?>
                    <?php endif; ?>
                </td>
                <td><?= e($group->name) ?></td>
                <td>
                    <?php if ($this->access['edit']) : ?>
                    <a href="<?=$this->smartUrlFromRoute('groups.edit', array('id' => $group->id_acl_role))?>" class="btn glyphicon glyphicon-cog"></a>
                    <?php endif; ?>
                    <?php if ($this->access['delete']) : ?>
                    <a href="<?=$this->smartUrlFromRoute('groups.delete', array('id' => $group->id_acl_role))?>" class="btn glyphicon glyphicon-trash"></a>
                    <?php endif; ?>
                </td>
            </tr>
            <?php endforeach; ?>
        </tbody>
    </table>
</div>

<?= $this->paginationControl(
    $this->paginator,
    'Sliding',
    'oft/partials/sliding',
    array('url' => $this->smartUrlFromRoute('groups.list'))
); ?>

<div class="text-right">
    <?php if ($this->access['create']) : ?>
    <a href="<?=$this->smartUrlFromRoute('groups.create')?>" class="btn btn-primary"><?=__('Create') ?></a>
    <?php endif; ?>
</div>
